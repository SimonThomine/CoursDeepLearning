<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test du changement de langue</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            max-width: 800px; 
            margin: 0 auto;
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            background: #f9f9f9;
        }
        button { 
            padding: 10px 15px; 
            margin: 5px; 
            cursor: pointer; 
            border: none;
            border-radius: 5px;
            font-size: 14px;
        }
        .btn-fr { background: #0055A4; color: white; }
        .btn-en { background: #C8102E; color: white; }
        .info { 
            background: #e3f2fd; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            border-left: 4px solid #2196F3;
        }
        .code { 
            background: #f5f5f5; 
            padding: 10px; 
            border-radius: 3px; 
            font-family: monospace; 
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Test du changement de langue - Jupyter Book</h1>
    
    <div class="info">
        <strong>URL actuelle:</strong> <span id="current-url"></span><br>
        <strong>Chemin d√©tect√©:</strong> <span id="current-path"></span><br>
        <strong>Page actuelle:</strong> <span id="current-page"></span>
    </div>
    
    <div class="test-section">
        <h3>üîó Liens directs vers les versions</h3>
        <p>Testez ces liens pour acc√©der directement aux versions :</p>
        <button class="btn-fr" onclick="window.open('_build_fr/_build/html/index.html')">
            üá´üá∑ Version Fran√ßaise
        </button>
        <button class="btn-en" onclick="window.open('_build_en/_build/html/index.html')">
            üá∫üá∏ Version Anglaise
        </button>
    </div>
    
    <div class="test-section">
        <h3>üîÑ Test du JavaScript de changement</h3>
        <p>Testez les fonctions JavaScript (ouvrez la console pour voir les logs) :</p>
        <button class="btn-fr" onclick="testSwitchToFrench()">
            Tester switchToFrench()
        </button>
        <button class="btn-en" onclick="testSwitchToEnglish()">
            Tester switchToEnglish()
        </button>
    </div>
    
    <div class="test-section">
        <h3>üìã URLs g√©n√©r√©es</h3>
        <p><strong>URL Fran√ßaise:</strong></p>
        <div class="code" id="french-url"></div>
        <p><strong>URL Anglaise:</strong></p>
        <div class="code" id="english-url"></div>
    </div>
    
    <div class="test-section">
        <h3>üõ†Ô∏è Instructions de test</h3>
        <ol>
            <li>Ouvrez d'abord une des versions (fran√ßaise ou anglaise) avec les boutons ci-dessus</li>
            <li>Une fois sur une page du livre, cherchez le footer avec les boutons de langue</li>
            <li>Cliquez sur le bouton de l'autre langue</li>
            <li>V√©rifiez que vous √™tes redirig√© vers la bonne version</li>
        </ol>
        <p><strong>Note:</strong> Le changement de langue fonctionne uniquement depuis les pages g√©n√©r√©es du livre, pas depuis cette page de test.</p>
    </div>
    
    <script>
    // Fonctions de test (copie de celles dans les configs)
    function getBaseUrl() {
        let baseUrl = window.location.origin;
        let pathname = window.location.pathname;
        
        if (pathname.includes('_build_fr/_build/html/')) {
            baseUrl += pathname.split('_build_fr/_build/html/')[0];
        } else if (pathname.includes('_build_en/_build/html/')) {
            baseUrl += pathname.split('_build_en/_build/html/')[0];
        } else {
            baseUrl += pathname.split('/').slice(0, -1).join('/') + '/';
        }
        
        return baseUrl;
    }
    
    function getCurrentPage() {
        let pathname = window.location.pathname;
        if (pathname.includes('_build_fr/_build/html/')) {
            return pathname.split('_build_fr/_build/html/')[1] || 'index.html';
        } else if (pathname.includes('_build_en/_build/html/')) {
            return pathname.split('_build_en/_build/html/')[1] || 'index.html';
        }
        return 'index.html';
    }
    
    function testSwitchToEnglish() {
        const baseUrl = getBaseUrl();
        const currentPage = getCurrentPage();
        const newUrl = baseUrl + '_build_en/_build/html/' + currentPage;
        console.log('Test switchToEnglish - URL g√©n√©r√©e:', newUrl);
        alert('URL g√©n√©r√©e pour l\'anglais: ' + newUrl + '\n\nVoir la console pour plus de d√©tails.');
    }
    
    function testSwitchToFrench() {
        const baseUrl = getBaseUrl();
        const currentPage = getCurrentPage();
        const newUrl = baseUrl + '_build_fr/_build/html/' + currentPage;
        console.log('Test switchToFrench - URL g√©n√©r√©e:', newUrl);
        alert('URL g√©n√©r√©e pour le fran√ßais: ' + newUrl + '\n\nVoir la console pour plus de d√©tails.');
    }
    
    // Mise √† jour de l'affichage
    function updateDisplay() {
        const baseUrl = getBaseUrl();
        const currentPage = getCurrentPage();
        
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('current-path').textContent = window.location.pathname;
        document.getElementById('current-page').textContent = currentPage;
        
        const frenchUrl = baseUrl + '_build_fr/_build/html/' + currentPage;
        const englishUrl = baseUrl + '_build_en/_build/html/' + currentPage;
        
        document.getElementById('french-url').textContent = frenchUrl;
        document.getElementById('english-url').textContent = englishUrl;
    }
    
    // Initialisation
    updateDisplay();
    
    console.log('Page de test charg√©e. Utilisez les boutons pour tester le changement de langue.');
    </script>
</body>
</html>